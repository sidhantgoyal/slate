<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Smooch Documentation</title>

    <link href="../stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="../stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
      <script src="../javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["objective_c","swift"]);
        });
      </script>
  </head>

  <body class="ios ios_index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="../images/logo.svg" />
      <div class="separator separator-top"></div>
      <div class="platform-nav">
        <div class="nav-label">Platform</div>
        <div class="platform-selector btn-group">
          <button class="btn btn-default" data-platform-name="ios">iOS</button>
          <button class="btn btn-default" data-platform-name="android">Android</button>
          <button class="btn btn-default" data-platform-name="web">Web</button>
        </div>
        <div class="clear"></div>
          <div class="nav-label">Language</div>
            <div class="btn-group">
              <button class="btn btn-default language-dropdown">Objective-C</button>
              <div class="arrow-down"></div>
              <div class="lang-selector">
                    <a href="#" data-language-name="objective_c">objective_c</a>
                    <a href="#" data-language-name="swift">swift</a>
              </div>
            <div class="clear"></div>
          </div>
      </div>
      <div class="separator"></div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='http://smooch.io/'>Sign up for Smooch, it's free</a></li>
            <li><br/></li>
            <li><a href='/ios'>iOS Guide</a> | <a href='/api/ios'>Class Reference</a></li>
            <li><a href='/android'>Android Guide</a> | <a href='/api/android'>Class Reference</a></li>
            <li><a href='/javascript'>Web Guide</a> | <a href='https://github.com/smooch/smooch-js' target="_blank">Class Reference</a></li>
            <li><a href='/rest'>REST API Reference</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id="welcome">Welcome</h1>

<p>The Walmart Buttons are designed to let you drive sales right in your app or on your website. The Call to Action button
can be placed next to a product offering on the website or mobile application and it can be configured to drive the
user to <a href="http://www.walmart.com">Walmart</a> product details page or to directly add the product to the cart on
<a href="http://www.walmart.com">Walmart</a></p>

<p>This page provides in-depth documentation on Walmart Button features and is meant to be a guide for developers
integrating the SDK and app makers seeking to engage with their users.</p>

          <h1 id="getting-started-for-ios">Getting Started for iOS</h1>

<p>You can integrate the Walmart BuyNow SDK with your iOS app. This will let you drive sales and your app users will be
able to buy from Walmart quickly. A good way to start is to follow this quick tutorial.
In the later part of this tutorial we have also provided source code examples for both Objective-C and
Swift. You can view code examples inline, and you can switch the programming language of the examples with the tabs
in the top left.</p>

<h3 id="prerequisites">Prerequisites</h3>

<ul>
<li>Apps using Walmart BuyNow SDK can target: iOS 8 or later (iOS 7 cannot be supported because it does not allow using
3rd party dynamic frameworks, and it is impossible to build static libraries that contain Swift code.)</li>
<li>Xcode (<a href="https://developer.apple.com/xcode/">Documentation</a> / <a href="http://itunes.apple.com/us/app/xcode/id497799835?ls=1&amp;mt=12">Download</a>)</li>
</ul>

          <h2 id="download-sdk">Download SDK</h2>

<p>Download the SDK and unzip the archive to  <code class="prettyprint">~/Documents/WalmartSDK</code>
<div class="download-button">Download iOS SDK</div></p>

          <h2 id="add-the-sdk-to-your-xcode-project">Add the SDK to your Xcode Project</h2>

<ol>
<li><p>Open <code class="prettyprint">~/Documents/WalmartSDK</code></p></li>
<li><p>Drag <code class="prettyprint">WMTSDKKit.framework</code> into the <code class="prettyprint">Embedded Binaries</code> section of your target. Make sure <strong>Copy items if
needed</strong> is selected and click <strong>Finish</strong>.</p>

<p><span class="three-fourth-width-img"><img alt="Embed Framework" src="../images/embed_framework.png" /></span></p>

<aside class="notice">If your application is <strong>Objective-C</strong> based, make sure in your <code>Build
Settings</code>
the <code>Build Option, Embedded ContentContains Swift Code</code> is set to <code>Yes</code>
</aside>

<p><span class="three-fourth-width-img"><img alt="Embedded Content Contains Swift Code" src="../images/embedded_content_contains_swift_code.png" /></span></p></li>
<li><p>Add a new <code class="prettyprint">Run Script Phase</code> in your targetâ€™s <code class="prettyprint">Build Phases</code>.</p>

<p><strong>Important</strong>: Make sure this <code class="prettyprint">Run Script Phase</code> is below the <code class="prettyprint">Embed Frameworks</code> build phase. You can drag
and drop build phases to rearrange them.
Paste the following line in this <code class="prettyprint">Run Script Phase</code>&rsquo;s script text
field:</p>
<pre class="highlight shell"><code>bash <span class="s2">"</span><span class="nv">$BUILT_PRODUCTS_DIR</span><span class="s2">/</span><span class="nv">$FRAMEWORKS_FOLDER_PATH</span><span class="s2">/WMTSDKKit.framework/strip-framework.sh"</span>
</code></pre>

<p>This step is required to work around an <a href="http://www.openradar
.me/radar?id=6409498411401216">App Store submission bug</a> when archiving universal binaries.</p>

<p><span class="three-fourth-width-img"><img alt="Run Script Phase" src="../images/run_script_phase.png" /></span></p></li>
</ol>

          <h2 id="configure-your-xcode-project">Configure your Xcode Project</h2>

<p>You will need a publisher Id to use the SDK. This is either provided by Walmart or if you are a Linkshare publisher,
then Linkshare publisher Id can be used. Now configure the <code class="prettyprint">.plist</code> for your project:</p>

<ol>
<li>In Xcode right-click your <code class="prettyprint">.plist</code> file and choose &ldquo;Open As Source Code&rdquo;.</li>
<li><p>Copy &amp; Paste the XML snippet into the body of your file (<code class="prettyprint">&lt;dict&gt;...&lt;/dict&gt;</code>).</p>
<pre class="highlight xml"><code><span class="nt">&lt;key&gt;</span>WalmartPublisherId<span class="nt">&lt;/key&gt;</span>
<span class="nt">&lt;string&gt;</span>{your-publisher-id}<span class="nt">&lt;/string&gt;</span>
</code></pre></li>
<li><p>Replace:</p>

<p><code class="prettyprint">{your-publisher-id}</code> with your publisher Id</p></li>
</ol>

<h5>For iOS 9 only: Whitelist Walmart Servers</h5>

<p>If you compile your app with iOS SDK <code class="prettyprint">9.0</code>, you will be affected by <a href="https://developer
.apple.com/library/prerelease/ios/technotes/App-Transport-Security-Technote/">App Transport Security</a>. Currently, you will need to whitelist
Walmart domains in your app by adding the following to your application&rsquo;s <code class="prettyprint">plist</code></p>
<pre class="highlight xml"><code><span class="nt">&lt;key&gt;</span>NSAppTransportSecurity<span class="nt">&lt;/key&gt;</span>
<span class="nt">&lt;dict&gt;</span>
    <span class="nt">&lt;key&gt;</span>NSExceptionDomains<span class="nt">&lt;/key&gt;</span>
    <span class="nt">&lt;dict&gt;</span>
        <span class="nt">&lt;key&gt;</span>walmart.com<span class="nt">&lt;/key&gt;</span>
        <span class="nt">&lt;dict&gt;</span>
            <span class="nt">&lt;key&gt;</span>NSIncludesSubdomains<span class="nt">&lt;/key&gt;&lt;true/&gt;</span>
            <span class="nt">&lt;key&gt;</span>NSExceptionAllowsInsecureHTTPLoads<span class="nt">&lt;/key&gt;&lt;true/&gt;</span>
        <span class="nt">&lt;/dict&gt;</span>
        <span class="nt">&lt;key&gt;</span>walmartimages.com<span class="nt">&lt;/key&gt;</span>
        <span class="nt">&lt;dict&gt;</span>
            <span class="nt">&lt;key&gt;</span>NSIncludesSubdomains<span class="nt">&lt;/key&gt;&lt;true/&gt;</span>
            <span class="nt">&lt;key&gt;</span>NSExceptionAllowsInsecureHTTPLoads<span class="nt">&lt;/key&gt;&lt;true/&gt;</span>
        <span class="nt">&lt;/dict&gt;</span>
        <span class="nt">&lt;key&gt;</span>wal.co<span class="nt">&lt;/key&gt;</span>
        <span class="nt">&lt;dict&gt;</span>
            <span class="nt">&lt;key&gt;</span>NSIncludesSubdomains<span class="nt">&lt;/key&gt;&lt;true/&gt;</span>
            <span class="nt">&lt;key&gt;</span>NSExceptionAllowsInsecureHTTPLoads<span class="nt">&lt;/key&gt;&lt;true/&gt;</span>
        <span class="nt">&lt;/dict&gt;</span>
    <span class="nt">&lt;/dict&gt;</span>
<span class="nt">&lt;/dict&gt;</span>
</code></pre>

          <h2 id="initialize-walmart-sdk">Initialize Walmart SDK</h2>

<p>Now that the SDK is installed, you&rsquo;ll need to initialize it first in your app. A good place to do that is in
your <code class="prettyprint">AppDelegate</code>&rsquo;s application <code class="prettyprint">(_:didFinishLaunchingWithOptions:)</code> method. You can also configure other
settings of the SDK there as well. Please go through the detailed Reference docs for iOS for available settings.</p>
<pre class="highlight objective_c"><code><span class="cp">#import "AppDelegate.h"
</span><span class="k">@import</span> <span class="n">WMTSDKKit</span><span class="p">;</span>

<span class="k">@interface</span> <span class="nc">AppDelegate</span> <span class="p">()</span>

<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">AppDelegate</span>


<span class="k">-</span> <span class="p">(</span><span class="n">BOOL</span><span class="p">)</span><span class="nf">application</span><span class="p">:(</span><span class="n">UIApplication</span> <span class="o">*</span><span class="p">)</span><span class="nv">application</span> <span class="nf">didFinishLaunchingWithOptions</span><span class="p">:(</span><span class="n">NSDictionary</span> <span class="o">*</span><span class="p">)</span><span class="nv">launchOptions</span> <span class="p">{</span>
    <span class="p">[</span><span class="n">WMTSDK</span> <span class="nf">initSDK</span><span class="p">:</span><span class="nb">false</span><span class="p">];</span>
    <span class="p">[</span><span class="n">WMTSDK</span> <span class="nf">setEnableDebugging</span><span class="p">:</span><span class="nb">true</span><span class="p">];</span>
    <span class="p">[</span><span class="n">WMTSDK</span> <span class="nf">setLinksharePartner</span><span class="p">:</span><span class="nb">true</span><span class="p">];</span>
    <span class="c1">// Override point for customization after application launch.
</span>    <span class="k">return</span> <span class="nb">YES</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">......</span>

</code></pre>
<pre class="highlight swift"><code>
<span class="kd">import</span> <span class="kt">UIKit</span>
<span class="kd">import</span> <span class="kt">WMTSDKKit</span>

<span class="k">@UIApplicationMain</span>
<span class="kd">class</span> <span class="kt">AppDelegate</span><span class="p">:</span> <span class="kt">UIResponder</span><span class="p">,</span> <span class="kt">UIApplicationDelegate</span> <span class="p">{</span>

    <span class="k">var</span> <span class="nv">window</span><span class="p">:</span> <span class="kt">UIWindow</span><span class="p">?</span>


    <span class="kd">func</span> <span class="nf">application</span><span class="p">(</span><span class="nv">application</span><span class="p">:</span> <span class="kt">UIApplication</span><span class="p">,</span> <span class="n">didFinishLaunchingWithOptions</span> <span class="nv">launchOptions</span><span class="p">:</span> <span class="p">[</span><span class="kt">NSObject</span><span class="p">:</span> <span class="kt">AnyObject</span><span class="p">]?)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>
        <span class="c1">// Override point for customization after application launch.</span>
        <span class="kt">WMTSDK</span><span class="o">.</span><span class="nf">initSDK</span><span class="p">()</span>
        <span class="kt">WMTSDK</span><span class="o">.</span><span class="nf">setEnableDebugging</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
        <span class="kt">WMTSDK</span><span class="o">.</span><span class="nf">setLinksharePartner</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">true</span>
    <span class="p">}</span>

    <span class="o">......</span>

</code></pre>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="objective_c">objective_c</a>
                <a href="#" data-language-name="swift">swift</a>
          </div>
      </div>
    </div>
  </body>
</html>
